{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/typecheck.js","webpack:///./src/js/Player.js","webpack:///./src/js/testing.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","typecheckString","input","Error","typecheckNumber","typecheckBool","types","Player","_classCallCheck","this","_instruments","notes","length","push","Tone","Synth","oscillator","type","harmonicity","modulationType","envelope","attackCurve","attack","decay","sustain","release","portamento","toMaster","overall_time","notes_array","dur_array","noteIndex","Transport","schedule","_scheduleNote","note","duration","instrument","time","triggerAttackRelease","start","stop","window","onload","event","console","log","player","playBtn","document","getElementById","stopBtn","addEventListener","play","disabled"],"mappings":"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","file":"test.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","export function typecheckString(input) {\n    if(typeof(input) !== 'string') {\n        throw new Error(\"input is not a string\");\n    }\n}\n\nexport function typecheckNumber(input) {\n    if(typeof(input) !== 'number') {\n        throw new Error(\"input is not a number\");\n    }\n}\n\nexport function typecheckBool(input) {\n    if(typeof(input) !== 'boolean') {\n        throw new Error(\"input is not a boolean\");\n    }\n}","\nimport * as types from \"./typecheck\";\n\n// This class is reponsible for taking a lexed and translated\n// *.music file and playing it in the browser. Therefore it will utilize Tone.js\n\nclass Player {\n    constructor() {\n        this._instruments = [];\n        //this._instrument = new Tone.Synth().toMaster();\n        //this._instrument_2 = new Tone.Synth().toMaster();\n    }\n\n    /*\n        example notes:\n        [  // array of voices.\n            [   // each voice is an array of notes and durations to play them.\n                [\"A4\", \"B4\"],\n                [1, 2], // The intention is to play notes in sequence.\n            ],\n            [\n                [\"C4\", \"D4\"],\n                [3, 5],\n\n                // Note that voices do not play at identical times. \"D4\" will start\n                // when \"B4\" ends. That is how the scheduling works.\n            ]\n        ]\n    */\n    schedule(notes) {\n        for(let i = 0; i < notes.length; i++) {\n            if(notes[i][0].length !== notes[i][1].length) {\n                throw new Error(\"number of notes does not equal number of durations\");\n            }\n            // add an instrument for each voice.\n            this._instruments.push(new Tone.Synth({\n                \"oscillator\" : {\n                    \"type\" : \"amtriangle\",\n                    \"harmonicity\" : 0.5,\n                    \"modulationType\" : \"sine\"\n                },\n                \"envelope\" : {\n                    \"attackCurve\" : 'exponential',\n                    \"attack\" : 0.05,\n                    \"decay\" : 0.2,\n                    \"sustain\" : 0.2,\n                    \"release\" : 1.5,\n                },\n                \"portamento\" : 0.05\n            }).toMaster());\n\n            //for each note-duration pair, schedule the note with correct duration.\n            let overall_time = 0;\n            let notes_array = notes[i][0];\n            let dur_array = notes[i][1];\n            for(let noteIndex = 0; noteIndex < notes_array.length; noteIndex++) {\n                Tone.Transport.schedule(\n                    this._scheduleNote(notes_array[noteIndex], dur_array[noteIndex]),\n                    overall_time\n                );\n\n                // Increment the overall_time for the scheduling of the next note.\n                overall_time += dur_array[noteIndex];\n            }\n        }\n    }\n\n    _scheduleNote(note, duration) {\n        types.typecheckString(note);\n        types.typecheckNumber(duration);\n\n        let instrument = this._instruments[this._instruments.length - 1];\n        return function playNote(time) {\n            instrument.triggerAttackRelease(note, duration, time);\n        }\n    }\n\n    play() {\n        Tone.Transport.start('+0.1');\n\n        /*\n        let instrument = this._instrument;\n        let instrument_2 = this._instrument_2;\n        return function doPlay(time) {\n            instrument_2.triggerAttackRelease(\"G4\", \"3\", time);\n            instrument.triggerAttackRelease(\"C4\", \"3\", time);\n        }*/\n    }\n\n    stop() {\n        Tone.Transport.stop();\n    }\n}\n\nexport default Player;\n","import Player from \"./Player\";\n\nwindow.onload = function(event) {\n\n    console.log(\"I am running\");\n    let player = new Player();\n    player.schedule([\n        [\n            [\"C4\", \"D4\", \"E4\", \"F4\", \"G4\", \"A4\", \"B4\", \"C5\"],\n            [0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5],\n        ],\n        /*[\n            [\"E4\", \"F4\", \"G4\", \"A4\", \"B4\", \"C5\", \"D5\", \"E5\"],\n            [0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5],\n        ]*/\n    ]);\n    const playBtn = document.getElementById(\"play\");\n    const stopBtn = document.getElementById(\"stop\");\n    playBtn.addEventListener(\"click\", (event) => {\n        player.play();\n        playBtn.disabled = true;\n        stopBtn.disabled = false;\n    });\n    stopBtn.addEventListener(\"click\", (event) => {\n        player.stop();\n        playBtn.disabled = false;\n        stopBtn.disabled = true;\n    })\n}"],"sourceRoot":""}