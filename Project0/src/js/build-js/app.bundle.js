!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=18)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typecheckString=function(e){if("string"!=typeof e)throw new Error("input is not a string")},t.typecheckNumber=function(e){if("number"!=typeof e)throw new Error("input is not a number")},t.typecheckBool=function(e){if("boolean"!=typeof e)throw new Error("input is not a boolean")}},function(e,t,r){"use strict";function n(e){if("string"!=typeof e)throw new Error("input is not a string")}Object.defineProperty(t,"__esModule",{value:!0}),t.preprocess=function(e){n(e);var t=e.trim();return""===t?[]:t.split(/[\s]+/)},t.verifyToken=function(e){return n(e),/^([A-G][1-9]?|~|!)$/.test(e)},t.typecheckString=n,t.typecheckNumber=function(e){if("number"!=typeof e)throw new Error("input is not a number")},t.verifyUnit=function(e){return n(e),/^(([1248])|16)$/.test(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(0));var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._instruments=[]}return n(e,[{key:"schedule",value:function(e){this._clearOldMusic();for(var t=0;t<e.length;t++){if(e[t][0].length!==e[t][1].length)throw new Error("number of notes does not equal number of durations");this._instruments.push(new Tone.Synth({oscillator:{type:"amtriangle",harmonicity:.5,modulationType:"sine"},envelope:{attackCurve:"exponential",attack:.05,decay:.2,sustain:.2,release:.5},portamento:.05}).toMaster());for(var r=0,n=e[t][0],o=e[t][1],i=0;i<n.length;i++)n[i]&&Tone.Transport.schedule(this._scheduleNote(n[i],o[i]),r),r+=o[i]}}},{key:"_clearOldMusic",value:function(){Tone.Transport.cancel()}},{key:"_scheduleNote",value:function(e,t){o.typecheckString(e),o.typecheckNumber(t);var r=this._instruments[this._instruments.length-1];return function(n){r.triggerAttackRelease(e,t,n)}}},{key:"play",value:function(){Tone.Transport.start("+0.1")}},{key:"pause",value:function(){Tone.Transport.pause()}},{key:"stop",value:function(){Tone.Transport.stop()}}]),e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyUnit=function(e){return n.typecheckNumber(e),1===e||2===e||4===e||8===e||16===e},t.translate=function(e,t,r){n.typecheckNumber(t),n.typecheckNumber(r);var i=0,u=0,a=[],s=[],c=[],l=[];for(;i<e.length;){if("~"===e[i])0===u?l.push([e[i],i]):u+=1;else{var f="!"===e[i]?null:e[i];s.push(f),u>0&&c.push(o(u,t,r)),u=1}i++}return c.push(o(u,t,r)),a.push(s),a.push(c),a.push(l),a},t.convertCountToDuration=o;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(0));function o(e,t,r){n.typecheckNumber(e),n.typecheckNumber(t),n.typecheckNumber(r);var o=e/r;return Math.floor(60*o*1e3)/1e3}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=u(r(0)),i=u(r(3));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._unit=4,this._units_per_minute=4,this._translation=[],this._errors=[]}return n(e,[{key:"setBaseUnit",value:function(e){if(o.typecheckNumber(e),!i.verifyUnit(e))throw new Error("base unit was not a valid unit. Valid units are '1', '2', '4', '8', '16'");this._unit=e}},{key:"getBaseUnit",value:function(){return this._unit}},{key:"setUnitsPerMinute",value:function(e){if(o.typecheckNumber(e),e<1)throw new Error("units per minute should be at least 1");this._units_per_minute=e}},{key:"getUnitsPerMinute",value:function(){return this._units_per_minute}},{key:"hasErrors",value:function(){return this._errors.length>0}},{key:"getErrors",value:function(){return this._errors}},{key:"getErrorSummary",value:function(){for(var e="The translator found the following errors:\n\n",t=0;t<this._errors.length;t++)e=e+"Token '"+this._errors[t][0]+"' at position "+this._errors[t][1]+" could not be translated\n";return e}},{key:"getTranslation",value:function(){return this._translation}},{key:"translate",value:function(e){if(e.length<2)throw new Error("voices array does not contain any voices!");this._clearOldTranslation();for(var t=1;t<e.length;t++)this._doTranslate(e[t]);return this.getTranslation()}},{key:"_clearOldTranslation",value:function(){this._translation=[],this._errors=[]}},{key:"_doTranslate",value:function(e){var t=i.translate(e,this.getBaseUnit(),this.getUnitsPerMinute()),r=t[2];r.length>0&&this._addError(r),this._translation.push([t[0],t[1]])}},{key:"_addError",value:function(e){this._errors=this._errors.concat(e)}}]),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(1));var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._note_table=new Map([["A","A4"],["B","B4"],["C","C4"],["D","D4"],["E","E4"],["F","F4"],["G","G4"]]),this._attr_table=new Map([])}return n(e,[{key:"convert",value:function(e,t){if(o.typecheckString(e),"number"!=typeof t)throw new Error("tokenPosition is not a number");if(/^[A-G]$/.test(e))return this._getNote(e);if(/^[A-G][1-9]$/.test(e))return e;if(/^(~|!)$/.test(e))return e;throw new Error("Conversion failed! Unexpected token!")}},{key:"_getNote",value:function(e){return o.typecheckString(e),this._note_table.get(e)}}]),e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={NEW_VOICE:"NEW"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=a(r(6)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(1)),u=a(r(5));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._num_voices=1,this._voices=[[],[]],this._token_stream=[],this._token_index=0,this._errors=[],this._unit_note="4"}return n(e,[{key:"setUnitNote",value:function(e){if(typecheckString(e),!i.verifyUnit(e))throw new Error("invalid unit note");this._unit_note=e}},{key:"getUnitNote",value:function(){return this._unit_note}},{key:"getVoice",value:function(e){if("number"!=typeof e)throw new Error("index not a number");if(e<1)throw new Error("not a valid index. Valid indexes are integers >= 1");return this._voices[e]}},{key:"getNumVoices",value:function(){return this._num_voices}},{key:"getAllVoices",value:function(){return this._voices}},{key:"getErrors",value:function(){return this._errors}},{key:"hasErrors",value:function(){return this._errors.length>0}},{key:"getErrorSummary",value:function(){for(var e="The following errors were found:\n\n",t=0;t<this._errors.length;t++)e=""+e+this._errors[t][0]+" at token position "+this._errors[t][1]+"\n";return e}},{key:"lex",value:function(e){return i.typecheckString(e),this._clearOldMusic(),this._doLexing(e),this.getAllVoices()}},{key:"_clearOldMusic",value:function(){this._token_stream=[],this._token_index=0,this._voices=[[],[]],this._num_voices=1,this._errors=[]}},{key:"_doLexing",value:function(e){i.typecheckString(e),this._preprocessMusic(e),this._process()}},{key:"_preprocessMusic",value:function(e){i.typecheckString(e),this._token_stream=i.preprocess(e)}},{key:"_process",value:function(){for(;this._hasMoreMusicTokens();){var e=this._nextMusicToken(),t=this._token_index-1;e===o.default.NEW_VOICE?this._addNewVoice():this._addOrRejectToken(e,t)}}},{key:"_hasMoreMusicTokens",value:function(){return this._token_index<this._token_stream.length}},{key:"_nextMusicToken",value:function(){var e=this._token_stream[this._token_index];return this._token_index+=1,e}},{key:"_addNewVoice",value:function(){this._num_voices+=1,this._voices.push([])}},{key:"_addOrRejectToken",value:function(e,t){i.typecheckString(e),i.typecheckNumber(t),this._tokenIsInLanguage(e)?this._addNote(this._convertTokenToNote(e,t)):this._addError(e)}},{key:"_tokenIsInLanguage",value:function(e){return i.typecheckString(e),i.verifyToken(e)}},{key:"_convertTokenToNote",value:function(e,t){return i.typecheckString(e),i.typecheckNumber(t),(new u.default).convert(e,t)}},{key:"_addNote",value:function(e){i.typecheckString(e),this._voices[this.getNumVoices()].push(e)}},{key:"_addError",value:function(e){i.typecheckString(e);var t=this._token_index-1;this._errors.push([e,t])}}]),e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractHeader=function(e){n.typecheckString(e);var t={},r=e.trim().split("\n");if(3!==r.length)throw new Error("header does not have 3 lines. Headers are expected to take the following form:\n<TITLE> \n<AUTHOR> \nunit <UNIT> upm <UPM> beat <BEAT>");t.title=r[0].trim(),t.author=r[1].trim();var o=r[2].trim().split(/[\s]+/);if(6!==o.length)throw new Error("header modifiers were not correctly written. Should be of form 'unit <UNIT> upm <UPM> beat <BEAT>");var i=0;for(;i<o.length;){if("unit"===o[i])t.unit=parseInt(o[i+1]);else if("upm"===o[i])t.upm=parseInt(o[i+1]);else{if("beat"!==o[i])throw new Error("header modifier token "+o[i]+" is invalid. Choose from 'unit', 'upm', and 'beat'");t.beat=parseInt(o[i+1])}i+=2}return t};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(0))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=u(r(0)),i=u(r(8));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var a=function(){function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("Must provide a lexer");if(!r)throw new Error("Must provide a translator");this._lexer=t,this._translator=r,this._author="",this._title="",this._beat=4,this._unit=4}return n(e,[{key:"hasLexerErrors",value:function(){return this._lexer.hasErrors()}},{key:"hasTranslatorErrors",value:function(){return this._translator.hasErrors()}},{key:"hasErrors",value:function(){return this.hasLexerErrors()||this.hasTranslatorErrors()}},{key:"getErrors",value:function(){return this._lexer.getErrors().concat(this._translator.getErrors())}},{key:"getErrorSummary",value:function(){return this._lexer.getErrorSummary()+this._translator.getErrorSummary()}},{key:"getGeneratedMusic",value:function(){return this._translator.getTranslation()}},{key:"getTitle",value:function(){return this._title}},{key:"getAuthor",value:function(){return this._author}},{key:"hasUnit",value:function(e){return e===this._unit}},{key:"hasBeat",value:function(e){return e===this._beat}},{key:"hasUnitsPerMinute",value:function(e){return e===this._translator.getUnitsPerMinute()}},{key:"getBpm",value:function(){return this._beat/this._unit*this._translator.getUnitsPerMinute()}},{key:"generate",value:function(e){return o.typecheckString(e),this._clearOldGeneratedMusic(),this._setHeaderValues(this._extractHeaderValues(e)),this._lex(this._extractScoreValues(e)),this._translate(),this.getGeneratedMusic()}},{key:"_clearOldGeneratedMusic",value:function(){}},{key:"_setHeaderValues",value:function(e){this._title=e.title?e.title:"Unknown",this._author=e.author?e.author:"Unknown",this._translator.setUnitsPerMinute(e.upm?e.upm:60),this._unit=e.unit?e.unit:4,this._beat=e.beat?e.beat:4}},{key:"_extractHeaderValues",value:function(e){if(o.typecheckString(e),!e.includes("-ScoreStart-"))throw new Error("music file requires a string '-ScoreStart-' to denote the end of the header");return i.extractHeader(e.split("-ScoreStart-")[0])}},{key:"_extractScoreValues",value:function(e){if(o.typecheckString(e),!e.includes("-ScoreStart-"))throw new Error("music file requires a string '-ScoreStart-' to denote the start of the score");return e.split("-ScoreStart-")[1]}},{key:"_lex",value:function(e){o.typecheckString(e),this._lexer.lex(e)}},{key:"_translate",value:function(){this._translator.translate(this._lexer.getAllVoices())}}]),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.existsUserChosenFile=function(){return document.getElementById("user-music").files.length>0},t.getSelectedMusic=function(){var e="Layla \nEric Clapton \nunit 16 upm 120 beat 4 \n -ScoreStart- \nA3 C4 D4 E4 D4 A3 C4 ~ ! ~ E3 E3 E3 ~ D3 D3 C3 D3 E3",t=document.getElementById("provided-music").value;if("layla"===t)return e;if("duck"===t)return e;if("user"===t)return e;throw new Error("An invalid selection was made!")}},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addArrowEvents=function(){var e=!0,t=!1,r=void 0;try{for(var n,o=function(){var e=n.value,t="arrow-"+e.toString(),r=document.getElementById(t);r.addEventListener("animationend",function(e){r.classList.remove("explode")})},i=[1,2,3,4][Symbol.iterator]();!(e=(n=i.next()).done);e=!0)o()}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addPreviewEvents=function(e){var t=document.getElementById("start-preview"),r=document.getElementById("stop-preview"),i=new o.default;t.addEventListener("click",function(o){!function(){n.existsUserChosenFile()?function(){var t=new FileReader;t.onload=function(t){console.log(t.target.result),e.generate(t.target.result),i.schedule(e.getGeneratedMusic()),i.play()},t.readAsText(document.getElementById("user-music").files[0])}():(e.generate(n.getSelectedMusic()),i.schedule(e.getGeneratedMusic()),i.play())}(),t.disabled=!0,r.disabled=!1}),r.addEventListener("click",function(e){i.stop(),t.disabled=!1,r.disabled=!0})};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(10)),o=function(e){return e&&e.__esModule?e:{default:e}}(r(2))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertDurationsToArrowStartAndEndTimes=function(e,t){var r=e.reduce(function(e,t){return e.push(t+e[e.length-1]),e},[0]).map(function(e){if(t===n.EASY)return[e-10,e];if(t===n.MEDIUM)return[e-7,e];if(t===n.HARD)return[e-4,e];throw new Error("invalid mode detected: "+t.toString())}).filter(function(e){return e[0]>=0});return r.pop(),r};var n=t.Mode={EASY:0,MEDIUM:1,HARD:2}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Direction=void 0,t.createFastArrow=function(e){return i(c)(e)},t.createMediumArrow=function(e){return i(s)(e)},t.createSlowArrow=function(e){return i(a)(e)};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(0));var o=t.Direction={LEFT:1,UP:2,DOWN:3,RIGHT:4};function i(e){return function(t){if(n.typecheckNumber(t),!function(e){if(n.typecheckNumber(e),e!==o.LEFT&&e!=o.RIGHT&&e!==o.UP&&e!==o.DOWN)return!1;return!0}(t))throw new Error(t.toString()+" is not a valid direction");return t===o.LEFT?e(function(){var e=document.createElement("i");return e.classList.add("fa","fa-arrow-left","moving-arrow"),e}()):t===o.UP?e(function(){var e=document.createElement("i");return e.classList.add("fa","fa-arrow-up","moving-arrow"),e}()):t===o.DOWN?e(function(){var e=document.createElement("i");return e.classList.add("fa","fa-arrow-down","moving-arrow"),e}()):e(function(){var e=document.createElement("i");return e.classList.add("fa","fa-arrow-right","moving-arrow"),e}())}}function u(e){return e.addEventListener("animationend",function(t){"slidedown"===t.animationName&&e.remove()},!1),e}function a(e){return e.classList.add("moving-arrow-slow"),u(e),e}function s(e){return e.classList.add("moving-arrow-medium"),u(e),e}function c(e){return e.classList.add("moving-arrow-fast"),u(e),e}console.log("animations are running!")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mode=t.GamePlayer=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(n):void 0},i=l(r(0)),u=r(15),a=function(e){return e&&e.__esModule?e:{default:e}}(r(2)),s=r(14),c=l(s);function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var f=1,d=2,h=3,v=4,p=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._mode=s.Mode.EASY,e._count=0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),n(t,[{key:"getMode",value:function(){return this._mode}},{key:"setMode",value:function(e){if(e!==s.Mode.EASY&&e!==s.Mode.MEDIUM&&e!==s.Mode.HARD)throw new Error("Valid modes: '0', '1', '2'");this._mode=e}},{key:"schedule",value:function(e){this._clearOldArrows(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"schedule",this).call(this,e);for(var r=0;r<e.length;r++){var n=e[r][1],i=c.convertDurationsToArrowStartAndEndTimes(n,this._mode);console.log(i),this._scheduleArrows(i)}}},{key:"_clearOldArrows",value:function(){Tone.Draw.cancel(),this._count=0}},{key:"_scheduleArrows",value:function(e){var t=this;console.log("Scheduling the game in mode "+this._mode.toString());for(var r=this._createArrow,n=this,o=function(o){var i=1+Math.floor(4*Math.random()),u=e[o][1]-e[o][0],a=r.call(n,i,u),s="lane-"+i.toString(),c="arrow-"+i.toString(),l=t._scheduleArrowCompletion;Tone.Transport.schedule(function(t){Tone.Draw.schedule(function(){document.getElementById(s).appendChild(a),l.call(n,c,e[o][1])})},e[o][0])},i=0;i<e.length;i++)o(i)}},{key:"_createArrow",value:function(e,t){i.typecheckNumber(e),i.typecheckNumber(t);var r=this._getArrowDirection(e);return this._getArrowCreationFn(t)(r)}},{key:"_getArrowDirection",value:function(e){if(i.typecheckNumber(e),e===f)return u.Direction.LEFT;if(e===d)return u.Direction.UP;if(e===h)return u.Direction.DOWN;if(e===v)return u.Direction.RIGHT;throw new Error(e.toString()+" is not a valid lane number. Valid numbers are 1, 2, 3, and 4")}},{key:"_getArrowCreationFn",value:function(e){if(i.typecheckNumber(e),4===e)return u.createFastArrow;if(7===e)return u.createMediumArrow;if(10===e)return u.createSlowArrow;throw new Error("arrow duration does not match any arrow type's speed")}},{key:"_scheduleArrowCompletion",value:function(e,t){if(console.log("Scheduling an arrow"),i.typecheckNumber(t),i.typecheckString(e),t<0)throw new Error("completion time must be non-negative");var r=this;document.addEventListener("keydown",function n(o){if(function(e){if(i.typecheckString(e),"ArrowLeft"===e||"ArrowRight"===e||"ArrowUp"===e||"ArrowDown"===e)return!0;return!1}(o.code)){if(o.preventDefault(),Math.abs(Tone.Transport.seconds-t)<.5){console.log("Success!"),document.getElementById(e).classList.add("explode"),document.removeEventListener("keydown",n),function(){this._count+=1}.call(r),document.getElementById("counter").innerText="Count: "+function(){return this._count}.call(r).toString()}Tone.Transport.seconds>t+1&&document.removeEventListener("keydown",n)}})}},{key:"play",value:function(){document.getElementById("counter").innerText="Count: "+this._count.toString(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"play",this).call(this)}}]),t}();t.GamePlayer=p,t.Mode=s.Mode},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addStartEvents=function(e){var t=document.getElementById("start-game"),r=document.getElementById("pause-game"),i=new n.GamePlayer;t.addEventListener("click",function(u){!function(){o.existsUserChosenFile()?(console.log("A file is selected!"),function(){var r=new FileReader;r.onload=function(r){var n=r.target.result;e.generate(n),console.log(e.getGeneratedMusic()),t(e.getGeneratedMusic())},r.readAsText(document.getElementById("user-music").files[0])}()):(console.log("no file was selected"),function(){var r=e.generate(o.getSelectedMusic());console.log(e.getGeneratedMusic()),t(r)}());function t(e){var t=document.querySelector('input[name = "difficulty"]:checked').value;if(console.log(t),"easy"===t)i.setMode(n.Mode.EASY);else if("medium"===t)i.setMode(n.Mode.MEDIUM);else{if("hard"!==t)throw new Error("Invalid mode selected for DDR");i.setMode(n.Mode.HARD)}i.schedule(e),i.play()}}(),console.log("play game!"),t.disabled=!0,r.disabled=!1}),r.addEventListener("click",function e(r){console.log("pause game!"),i.pause(),t.disabled=!1,e.disabled=!0})};var n=r(16),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(10))},function(e,t,r){"use strict";var n=l(r(9)),o=l(r(7)),i=l(r(4)),u=c(r(17)),a=c(r(13)),s=c(r(12));function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}!function(){var e=new n.default(new o.default,new i.default);window.onload=function(t){console.log("Script running at load"),s.addArrowEvents(),a.addPreviewEvents(e),u.addStartEvents(e)}}()}]);
//# sourceMappingURL=app.bundle.js.map